_while_ â† {ğ”½âŸğ”¾âˆ˜ğ”½_ğ•£_ğ”¾âˆ˜ğ”½âŸğ”¾ğ•©}
FPGâ†{
  ğ•Šğ•©: 4â€¿4ğ•Šğ•©;
  (âˆ§Â´ğ•¨<0)âˆ¨2â‰ â‰ ğ•¨ ? â€¢Out "Invalid shape: "âˆ¾â€¢Fmt ğ•¨;
  0â‰ =ğ•© ? â€¢Out "Invalid shuffle count: "âˆ¾â€¢Fmt ğ•©;
  sğ•Šğ•©:
  dâ†âŸ¨1â€¿0â‹„Â¯1â€¿0â‹„0â€¿1â‹„0â€¿Â¯1âŸ© # Directions
  wâ†ğ•¨â¥Š1âŒ½â†•Ã—Â´ğ•¨ # Solved grid
  bâ†w        # Board
  zâ†âŠ‘{
    zâ€¿pâ†ğ•©
    pâ†©(âŠ¢â‰¡sâŠ¸|)Â¨âŠ¸/(<z)+d(Â¬âˆ˜âˆŠ/âŠ£)p # filter out invalid
    nâ†(â€¢rand.Range â‰ p)âŠ‘p
    bâŒ½âŒ¾(zâ€¿nâŠ¸âŠ‘)â†© # switch places
    -`nâ€¿z
  }âŸğ•© âŸ¨ğ•¨-1,âŸ¨0âŸ©âŸ©
  {
    ğ•Š:
    bâ‰¡w ? â€¢Show b, â€¢Out "You win", 0;
    â€¢Show b
    inpâ†âŠ‘{
      Check ğ•©:
      â€¢Out "Enter move: "
      xâ†â€¢GetLine@
      iâ†âŠ‘"â†‘â†“â†â†’q"âŠx
      {
        i=4 ? i; # quit
        i>4 ? â€¢Out "Invalid direction: "âˆ¾x, Check x;
        (âŠ¢â‰¢sâŠ¸|)z+iâŠ‘d ? â€¢Out "Out of bounds: "âˆ¾x, Check x;
        i
      }
    } @
    {
      ğ•©=4 ? â€¢Out "Quitting", 0;
      mvâ†z+ğ•©âŠ‘d
      bâŒ½âŒ¾(mvâ€¿zâŠ¸âŠ‘)â†©
      zâ†©mv
      1
    } inp
  } _while_ âŠ¢ 1
  @
}
