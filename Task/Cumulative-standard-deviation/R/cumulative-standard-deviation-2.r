accumsd <- function() {
  n <- 0
  m <- 0
  s <- 0

  function(x) {
    n <<- n + 1
    m <<- m + x
    s <<- s + x * x
    sqrt(s / n - (m / n)^2)
  }
}

f <- accumsd()
sapply(x, f)
# [1] 0.0000000 0.3380816 0.8752973 1.1783628 1.2345538 1.3757142 1.2867220 1.2229056 1.1665168 1.1096814
