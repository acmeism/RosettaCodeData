create or replace function length_first_run_list(list) as (
  case when list = [] then 0
  else coalesce(list_position( list_transform(list, x -> (x=list[1])), false) - 1, length(list))
  end
 );

create or replace function first_run_length(string) as (
  select length_first_run_list(regexp_extract_all(string, '.'))
 );

# Sample data
create or replace table strings as VALUES
          (''),
       ('   '),
         ('2'),
       ('333'),
       ('.55'),
    ('tttTTT'),
 ('4444 444k'),
 ('ğŸ¶ğŸ¶ğŸºğŸ¶'),
 ('ğŸ„ğŸ„ğŸ„ğŸ„');

# The task:
WITH cte as (
    SELECT string, first_run_length(string) as first_run
    FROM strings t(string)
  ),
  details as (
    SELECT *, (case when first_run != length(string) then first_run + 1 else NULL end) as "index"
    FROM cte
  )
  SELECT string,
         length(string) as length,
         first_run = length(string) as same,
         "index" as 'index of switch char',
         string["index"] as 'switch char',
         format('{:x}', ascii(string["index"])) as 'hex of switch char'
  FROM details;
