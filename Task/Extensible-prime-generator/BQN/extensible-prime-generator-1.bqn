# Function that returns a new prime generator
PrimeGen â† {ğ•¤
  i â† 0  # Counter: index of next prime to be output
  primes â† â†•0
  next â† 2
  Sieve â† { p ğ•Š iâ€¿n:
    E â† {â†•âˆ˜âŒˆâŒ¾(((ğ•©|-i)+ğ•©Ã—âŠ¢)â¼)n-i}       # Indices of multiples of ğ•©
    i + / (1â¥ŠËœn-i) EâŠ¸{0Â¨âŒ¾(ğ•¨âŠ¸âŠ)ğ•©}Â´ p    # Primes in segment [i,n)
  }
  {ğ•¤
    { i=â‰ primes ?                      # Extend if required
      next â†© ((2â‹†24)âŠ¸+ âŒŠ Ã—Ëœ) oldâ†next  # Sieve at most 16M new entries
      primes âˆ¾â†© (primes(â‹â†‘âŠ£)âˆšnext) Sieve oldâ€¿next
    ;@}
    (i+â†©1) âŠ¢ iâŠ‘primes
  }
}
_w_â†{ğ”½âŸğ”¾âˆ˜ğ”½_ğ•£_ğ”¾âˆ˜ğ”½âŸğ”¾ğ•©}  # Looping utility for the session below
