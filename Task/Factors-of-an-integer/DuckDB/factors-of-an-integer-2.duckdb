create or replace function unsorted_factors(n) as table (
  with cte as (
    select i
    from generate_series(1, sqrt(n)::INT) _(i)
    where n % i = 0
  )
  from cte
  union all
    (select n//i
     from cte
     where n // i != i)
);

## Examples

from unsorted_factors(99);

select n, (select array_agg(x) from unsorted_factors(n) _(x)) as unsorted_factors
from (select unnest([1,2,3,4,5,6, 45, 53, 64]) as n);
