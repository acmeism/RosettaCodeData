global kMap

procedure main()
    kMap := table()
    kMap["1"] := italicsOn
    kMap["2"] := italicsOff
    kMap["\x4"] := exit    # ^D terminates
    while writes(exec(getch()))
end

procedure exec(c)
    return (\kMap[c])() | c
end

procedure italicsOn()
    return "<i>"
end

procedure italicsOff()
    return "<\\i>"
end
