use utf8;
use Math::Cartesian::Product;

package Circle;

sub new {
    my ($class, $args) = @_;
    my $self = {
        x => $args->{x},
        y => $args->{y},
        r => $args->{r},
    };
    bless $self, $class;
}

sub show {
    my ($self, $args) = @_;
    sprintf "x =%7.3f  y =%7.3f  r =%7.3f\n", $args->{x}, $args->{y}, $args->{r};
}

package main;

sub circle {
    my($x,$y,$r) = @_;
    Circle->new({ x => $x, y=> $y, r => $r });
}

sub solve_Apollonius {
    my($c1, $c2, $c3, $s1, $s2, $s3) = @_;

    my $ð‘£11 = 2 * $c2->{x} - 2 * $c1->{x};
    my $ð‘£12 = 2 * $c2->{y} - 2 * $c1->{y};
    my $ð‘£13 = $c1->{x}**2 - $c2->{x}**2 + $c1->{y}**2 - $c2->{y}**2 - $c1->{r}**2 + $c2->{r}**2;
    my $ð‘£14 = 2 * $s2 * $c2->{r} - 2 * $s1 * $c1->{r};

    my $ð‘£21 = 2 * $c3->{x} - 2 * $c2->{x};
    my $ð‘£22 = 2 * $c3->{y} - 2 * $c2->{y};
    my $ð‘£23 = $c2->{x}**2 - $c3->{x}**2 + $c2->{y}**2 - $c3->{y}**2 - $c2->{r}**2 + $c3->{r}**2;
    my $ð‘£24 = 2 * $s3 * $c3->{r} - 2 * $s2 * $c2->{r};

    my $ð‘¤12 = $ð‘£12 / $ð‘£11;
    my $ð‘¤13 = $ð‘£13 / $ð‘£11;
    my $ð‘¤14 = $ð‘£14 / $ð‘£11;

    my $ð‘¤22 = $ð‘£22 / $ð‘£21 - $ð‘¤12;
    my $ð‘¤23 = $ð‘£23 / $ð‘£21 - $ð‘¤13;
    my $ð‘¤24 = $ð‘£24 / $ð‘£21 - $ð‘¤14;

    my $ð‘ƒ = -$ð‘¤23 / $ð‘¤22;
    my $ð‘„ = $ð‘¤24 / $ð‘¤22;
    my $ð‘€ = -$ð‘¤12 * $ð‘ƒ - $ð‘¤13;
    my $ð‘ = $ð‘¤14 - $ð‘¤12 * $ð‘„;

    my $ð‘Ž = $ð‘**2 + $ð‘„**2 - 1;
    my $ð‘ = 2 * $ð‘€ * $ð‘ - 2 * $ð‘ * $c1->{x} + 2 * $ð‘ƒ * $ð‘„ - 2 * $ð‘„ * $c1->{y} + 2 * $s1 * $c1->{r};
    my $ð‘ = $c1->{x}**2 + $ð‘€**2 - 2 * $ð‘€ * $c1->{x} + $ð‘ƒ**2 + $c1->{y}**2 - 2 * $ð‘ƒ * $c1->{y} - $c1->{r}**2;

    my $ð· = $ð‘**2 - 4 * $ð‘Ž * $ð‘;
    my $rs = (-$ð‘ - sqrt $ð·) / (2 * $ð‘Ž);

    my $xs = $ð‘€ + $ð‘ * $rs;
    my $ys = $ð‘ƒ + $ð‘„ * $rs;

    circle($xs, $ys, $rs);
}

$c1 = circle(0, 0, 1);
$c2 = circle(4, 0, 1);
$c3 = circle(2, 4, 2);

for (cartesian {@_} ([-1,1])x3) {
    print Circle->show( solve_Apollonius $c1, $c2, $c3, @$_);
}
