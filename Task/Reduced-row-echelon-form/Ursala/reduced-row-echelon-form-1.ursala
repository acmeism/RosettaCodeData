#import std
#import flo

pivot      = -<x fleq+ abs~~bh
descending = ~&a^&+ ^|ahPathS2fattS2RpC/~&
reflect    = ~&lxPrTSx+ *iiD ~&l-~brS+ zipp0
row_reduce = ^C/vid*hhiD *htD minus^*p/~&r times^*D/vid@bh ~&l
rref       = reflect+ (descending row_reduce)+ reflect+ descending row_reduce+ pivot

#show+

test =

printf/*=*'%8.4f' rref <
   <1.,2.,-1.,-4.>,
   <2.,3.,-1.,-11.>,
   <-2.,0.,-3.,22.>>
